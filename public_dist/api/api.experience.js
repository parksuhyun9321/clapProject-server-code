let path=require("path"),fs=require("fs"),UserModel=require("../model/user").UserModel;function ExperienceDelete(s,a){try{var e=new Date,r=new Date,t=(r.setHours(s,a,0,0),r<e&&r.setDate(r.getDate()+1),r-e);let i=setTimeout(async()=>{var e=await UserModel.find({isExperience:!0});if(0<e.length){await UserModel.deleteMany({isExperience:!0});for(var r of e){var t=path.join(__dirname,"..","..","/"+process.env.FILE_DIRECTORY_NAME),t=path.join(t,r.id);fs.existsSync(t)&&fs.rmSync(t,{recursive:!0,force:!0})}}ExperienceDelete(s,a),clearTimeout(i),i=null},t)}catch(e){console.log(new Date+" : 체험유저 삭제 에러")}}module.exports=ExperienceDelete;// build date : 2024. 12. 23. 오후 10:15:20